import streamlit as st

# ======================
# إعدادات الصفحة
# ======================
st.set_page_config(page_title="🤖 أفضل بوت لتعلم البرمجة", layout="wide")

# ======================
# عنوان البوت
# ======================
st.markdown("<h1 style='text-align: center; color: #4CAF50;'>🤖 بوت تعليم البرمجة</h1>", unsafe_allow_html=True)
st.write("مرحبًا بك! هذا البوت صُمم ليكون أفضل مساعد لك في **تعلم البرمجة** خطوة بخطوة 🚀. "
         "يمكنك إما التحدث معه في وضع المحادثة 💬 أو الدخول في دورة تعليمية منظمة 📖.")

st.markdown("---")

# ======================
# وضع الدورة التعليمية
# ======================
lessons = [
    ("📘 الدرس 1: ما هي البرمجة؟", 
     "البرمجة هي عملية **إعطاء أوامر وتعليمات للحاسوب** باستخدام لغة خاصة يفهمها. 🖥️\n\n"
     "📌 بفضل البرمجة نقدر نصنع:\n"
     "- تطبيقات الهاتف 📱\n"
     "- المواقع الإلكترونية 🌐\n"
     "- ألعاب الفيديو 🎮\n"
     "- الذكاء الاصطناعي 🤖\n\n"
     "➡️ البرمجة اليوم تعتبر من أهم المهارات المطلوبة في العالم."),

    ("📘 الدرس 2: أساسيات البرمجة", 
     "قبل أن تبدأ أي لغة برمجة، لازم تعرف الأساسيات:\n\n"
     "🔹 **المتغيرات (Variables):** تخزن بيانات مثل الأسماء والأرقام.\n"
     "🔹 **أنواع البيانات (Data Types):** نصوص، أرقام صحيحة، أرقام عشرية، قيم منطقية.\n"
     "🔹 **الجمل الشرطية (If):** تسمح بتنفيذ أوامر معينة عند تحقق شرط.\n"
     "🔹 **الحلقات (Loops):** تسمح بتكرار الأوامر عدة مرات.\n"
     "🔹 **الدوال (Functions):** مجموعة أوامر نقدر نعاود استخدامها."),

    ("📘 الدرس 3: أول برنامج بلغة بايثون", 
     "بايثون من أسهل اللغات 💡. جرب تكتب هذا الكود:\n\n"
     "```python\nprint('مرحبا بالعالم!')\n```\n\n"
     "📌 النتيجة: \n```\nمرحبا بالعالم!\n```"),

    ("📘 الدرس 4: تمرين عملي", 
     "✍️ جرب تكتب برنامج يطلب من المستخدم إدخال اسمه ويطبع رسالة ترحيب:\n\n"
     "```python\nname = input('ما هو اسمك؟ ')\nprint('أهلا بك، ' + name)\n```"),

    ("📘 الدرس 5: لغات البرمجة المختلفة", 
     "البرمجة مشي غير بايثون، كاين بزاف لغات، كل وحدة عندها استعمال:\n\n"
     "- **JavaScript:** تطوير المواقع 🌐\n"
     "- **Java / Kotlin:** تطبيقات أندرويد 📱\n"
     "- **Swift:** تطبيقات iOS 🍏\n"
     "- **C++ / C#:** الألعاب والتطبيقات الثقيلة 🎮\n"
     "- **SQL:** قواعد البيانات 🗄️"),

    ("📘 الدرس 6: مجالات البرمجة", 
     "بفضل البرمجة نقدر نخدمو في مجالات كثيرة:\n\n"
     "🌐 تطوير المواقع\n"
     "📱 تطبيقات الهاتف\n"
     "🤖 الذكاء الاصطناعي\n"
     "🎮 الألعاب\n"
     "📊 تحليل البيانات"),

    ("📘 الدرس 7: نصائح لتعلم البرمجة", 
     "🔑 أهم النصائح:\n"
     "1. تعلم خطوة بخطوة.\n"
     "2. مارس يوميًا حتى ولو 30 دقيقة.\n"
     "3. حاول تحل المشاكل بنفسك.\n"
     "4. شارك في مجتمعات البرمجة.\n"
     "5. طبق مشاريع صغيرة مثل آلة حاسبة."),

    ("📘 الدرس 8: مصادر للتعلم", 
     "📚 أفضل المصادر المجانية:\n"
     "- FreeCodeCamp.org 🌍\n"
     "- W3Schools.com 📖\n"
     "- Codecademy.com 💻\n"
     "- YouTube 🎥"),

    ("📘 الدرس 9: تمرين متوسط", 
     "✍️ اكتب برنامج يحسب مجموع الأعداد من 1 إلى 100:\n\n"
     "```python\ntotal = 0\nfor i in range(1, 101):\n    total += i\nprint(total)\n```"),

    ("📘 الدرس 10: الخاتمة", 
     "🎉 مبروك! تعلمت الأساسيات وخطيت أول خطوة. "
     "البرمجة رحلة طويلة لكن ممتعة 🚀. الأهم هو الاستمرارية والصبر 💪.")
]

# ======================
# وضع المحادثة
# ======================
responses = {
    "السلام": "👋 وعليكم السلام ورحمة الله. مرحبا بيك! كيف نقدر نساعدك في تعلم البرمجة؟",
    "ما هي البرمجة": "البرمجة هي عملية كتابة أوامر للحاسوب بلغة يفهمها 🖥️. "
                      "بفضلها نقدر نصنع تطبيقات، مواقع، ألعاب وحتى ذكاء اصطناعي 🤖.",
    "ما هي اساسيات البرمجة": "من أهم الأساسيات: \n\n"
                              "- المتغيرات 📝\n"
                              "- أنواع البيانات 🔢\n"
                              "- الشروط 🔀\n"
                              "- الحلقات 🔁\n"
                              "- الدوال ⚙️\n\n"
                              "كل لغة برمجة تحتوي على هذه المفاهيم.",
    "ما هي لغة بايثون": "بايثون 🐍 لغة سهلة وقوية. تستعمل في:\n"
                         "- تطوير المواقع 🌐\n"
                         "- الذكاء الاصطناعي 🤖\n"
                         "- تحليل البيانات 📊\n"
                         "- الأتمتة ⚙️",
    "كيف اتعلم البرمجة": "📌 خطوات التعلم:\n"
                          "1. ابدأ بالأساسيات (متغيرات، حلقات، شروط).\n"
                          "2. مارس يوميًا.\n"
                          "3. طبق مشاريع صغيرة.\n"
                          "4. استعمل مصادر مجانية مثل FreeCodeCamp و YouTube.",
    "اريد نصيحة": "💡 نصيحتي: الصبر والممارسة اليومية. البرمجة مشي حاجة تحفظها، بل حاجة تطبقها.",
    "اعطني حكمة": "✨ الحكمة: البرمجة تعلمك التفكير المنطقي وحل المشاكل خطوة بخطوة.",
    "اعطني مصادر": "📚 المصادر الموصى بها: FreeCodeCamp, W3Schools, Codecademy, YouTube."
}

# ======================
# اختيار الوضع
# ======================
mode = st.radio("🎯 اختر الوضع:", ["💬 محادثة", "📖 دورة تعليمية"])

# ======================
# تنفيذ وضع المحادثة
# ======================
if mode == "💬 محادثة":
    st.subheader("💬 دردش مع البوت")

    if "chat_history" not in st.session_state:
        st.session_state.chat_history = []

    user_input = st.text_input("✍️ اكتب رسالتك هنا:")

    if st.button("🚀 إرسال"):
        if user_input:
            st.session_state.chat_history.append(("👤 أنت", user_input))
            response = responses.get(user_input.lower(), "⚠️ هناك خطأ، أرسل رسالة أخرى.")
            st.session_state.chat_history.append(("🤖 البوت", response))

    # عرض المحادثة في بطاقات
    for sender, message in st.session_state.chat_history:
        st.markdown(f"<div style='background-color:#f1f1f1;padding:10px;border-radius:10px;margin:5px 0;'>"
                    f"<b>{sender}:</b> {message}</div>", unsafe_allow_html=True)

    st.markdown("---")
    st.subheader("🔽 جرب هذه الأوامر السريعة:")
    cols = st.columns(3)
    for i, cmd in enumerate(responses.keys()):
        if cols[i % 3].button(cmd):
            st.session_state.chat_history.append(("👤 أنت", cmd))
            response = responses.get(cmd.lower(), "⚠️ هناك خطأ، أرسل رسالة أخرى.")
            st.session_state.chat_history.append(("🤖 البوت", response))

# ======================
# تنفيذ وضع الدورة التعليمية
# ======================
elif mode == "📖 دورة تعليمية":
    st.subheader("📖 دورة تعلم البرمجة خطوة بخطوة")
    for title, content in lessons:
        with st.expander(title):
            st.write(content)
